!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.musicolors=e():t.musicolors=e()}(this,(()=>(()=>{var t={645:t=>{"use strict";function e(t){if(this.size=0|t,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(2*this.size),r=0;r<e.length;r+=2){const t=Math.PI*r/this.size;e[r]=Math.cos(t),e[r+1]=-Math.sin(t)}this.table=e;for(var n=0,a=1;this.size>a;a<<=1)n++;this._width=n%2==0?n-1:n,this._bitrev=new Array(1<<this._width);for(var o=0;o<this._bitrev.length;o++){this._bitrev[o]=0;for(var i=0;i<this._width;i+=2){var s=this._width-i-2;this._bitrev[o]|=(o>>>i&3)<<s}}this._out=null,this._data=null,this._inv=0}t.exports=e,e.prototype.fromComplexArray=function(t,e){for(var r=e||new Array(t.length>>>1),n=0;n<t.length;n+=2)r[n>>>1]=t[n];return r},e.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var e=0;e<t.length;e++)t[e]=0;return t},e.prototype.toComplexArray=function(t,e){for(var r=e||this.createComplexArray(),n=0;n<r.length;n+=2)r[n]=t[n>>>1],r[n+1]=0;return r},e.prototype.completeSpectrum=function(t){for(var e=this._csize,r=e>>>1,n=2;n<r;n+=2)t[e-n]=t[n],t[e-n+1]=-t[n+1]},e.prototype.transform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._transform4(),this._out=null,this._data=null},e.prototype.realTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=0,this._realTransform4(),this._out=null,this._data=null},e.prototype.inverseTransform=function(t,e){if(t===e)throw new Error("Input and output buffers must be different");this._out=t,this._data=e,this._inv=1,this._transform4();for(var r=0;r<t.length;r++)t[r]/=this.size;this._out=null,this._data=null},e.prototype._transform4=function(){var t,e,r=this._out,n=this._csize,a=1<<this._width,o=n/a<<1,i=this._bitrev;if(4===o)for(t=0,e=0;t<n;t+=o,e++){const r=i[e];this._singleTransform2(t,r,a)}else for(t=0,e=0;t<n;t+=o,e++){const r=i[e];this._singleTransform4(t,r,a)}var s=this._inv?-1:1,u=this.table;for(a>>=2;a>=2;a>>=2){var f=(o=n/a<<1)>>>2;for(t=0;t<n;t+=o)for(var h=t+f,c=t,l=0;c<h;c+=2,l+=a){const t=c,e=t+f,n=e+f,a=n+f,o=r[t],i=r[t+1],h=r[e],m=r[e+1],p=r[n],v=r[n+1],_=r[a],g=r[a+1],w=o,d=i,y=u[l],b=s*u[l+1],S=h*y-m*b,M=h*b+m*y,x=u[2*l],T=s*u[2*l+1],E=p*x-v*T,A=p*T+v*x,F=u[3*l],C=s*u[3*l+1],z=_*F-g*C,O=_*C+g*F,R=w+E,k=d+A,B=w-E,I=d-A,j=S+z,N=M+O,D=s*(S-z),q=s*(M-O),$=R+j,P=k+N,X=R-j,Y=k-N,H=B+q,U=I-D,V=B-q,G=I+D;r[t]=$,r[t+1]=P,r[e]=H,r[e+1]=U,r[n]=X,r[n+1]=Y,r[a]=V,r[a+1]=G}}},e.prototype._singleTransform2=function(t,e,r){const n=this._out,a=this._data,o=a[e],i=a[e+1],s=a[e+r],u=a[e+r+1],f=o+s,h=i+u,c=o-s,l=i-u;n[t]=f,n[t+1]=h,n[t+2]=c,n[t+3]=l},e.prototype._singleTransform4=function(t,e,r){const n=this._out,a=this._data,o=this._inv?-1:1,i=2*r,s=3*r,u=a[e],f=a[e+1],h=a[e+r],c=a[e+r+1],l=a[e+i],m=a[e+i+1],p=a[e+s],v=a[e+s+1],_=u+l,g=f+m,w=u-l,d=f-m,y=h+p,b=c+v,S=o*(h-p),M=o*(c-v),x=_+y,T=g+b,E=w+M,A=d-S,F=_-y,C=g-b,z=w-M,O=d+S;n[t]=x,n[t+1]=T,n[t+2]=E,n[t+3]=A,n[t+4]=F,n[t+5]=C,n[t+6]=z,n[t+7]=O},e.prototype._realTransform4=function(){var t,e,r=this._out,n=this._csize,a=1<<this._width,o=n/a<<1,i=this._bitrev;if(4===o)for(t=0,e=0;t<n;t+=o,e++){const r=i[e];this._singleRealTransform2(t,r>>>1,a>>>1)}else for(t=0,e=0;t<n;t+=o,e++){const r=i[e];this._singleRealTransform4(t,r>>>1,a>>>1)}var s=this._inv?-1:1,u=this.table;for(a>>=2;a>=2;a>>=2){var f=(o=n/a<<1)>>>1,h=f>>>1,c=h>>>1;for(t=0;t<n;t+=o)for(var l=0,m=0;l<=c;l+=2,m+=a){var p=t+l,v=p+h,_=v+h,g=_+h,w=r[p],d=r[p+1],y=r[v],b=r[v+1],S=r[_],M=r[_+1],x=r[g],T=r[g+1],E=w,A=d,F=u[m],C=s*u[m+1],z=y*F-b*C,O=y*C+b*F,R=u[2*m],k=s*u[2*m+1],B=S*R-M*k,I=S*k+M*R,j=u[3*m],N=s*u[3*m+1],D=x*j-T*N,q=x*N+T*j,$=E+B,P=A+I,X=E-B,Y=A-I,H=z+D,U=O+q,V=s*(z-D),G=s*(O-q),L=$+H,J=P+U,W=X+G,K=Y-V;if(r[p]=L,r[p+1]=J,r[v]=W,r[v+1]=K,0!==l){if(l!==c){var Q=X+-s*G,Z=-s*V-Y,tt=$+-s*H,et=-P- -s*U,rt=t+h-l,nt=t+f-l;r[rt]=Q,r[rt+1]=Z,r[nt]=tt,r[nt+1]=et}}else{var at=$-H,ot=P-U;r[_]=at,r[_+1]=ot}}}},e.prototype._singleRealTransform2=function(t,e,r){const n=this._out,a=this._data,o=a[e],i=a[e+r],s=o+i,u=o-i;n[t]=s,n[t+1]=0,n[t+2]=u,n[t+3]=0},e.prototype._singleRealTransform4=function(t,e,r){const n=this._out,a=this._data,o=this._inv?-1:1,i=2*r,s=3*r,u=a[e],f=a[e+r],h=a[e+i],c=a[e+s],l=u+h,m=u-h,p=f+c,v=o*(f-c),_=l+p,g=m,w=-v,d=l-p,y=m,b=v;n[t]=_,n[t+1]=0,n[t+2]=g,n[t+3]=w,n[t+4]=d,n[t+5]=0,n[t+6]=y,n[t+7]=b}},752:function(t){t.exports=function(){"use strict";function t(t,e,r){if(r||2===arguments.length)for(var n,a=0,o=e.length;a<o;a++)!n&&a in e||(n||(n=Array.prototype.slice.call(e,0,a)),n[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))}var e=Object.freeze({__proto__:null,blackman:function(t){for(var e=new Float32Array(t),r=2*Math.PI/(t-1),n=2*r,a=0;a<t/2;a++)e[a]=.42-.5*Math.cos(a*r)+.08*Math.cos(a*n);for(a=Math.ceil(t/2);a>0;a--)e[t-a]=e[a-1];return e},sine:function(t){for(var e=Math.PI/(t-1),r=new Float32Array(t),n=0;n<t;n++)r[n]=Math.sin(e*n);return r},hanning:function(t){for(var e=new Float32Array(t),r=0;r<t;r++)e[r]=.5-.5*Math.cos(2*Math.PI*r/(t-1));return e},hamming:function(t){for(var e=new Float32Array(t),r=0;r<t;r++)e[r]=.54-.46*Math.cos(2*Math.PI*(r/t-1));return e}}),r={};function n(t){for(;t%2==0&&t>1;)t/=2;return 1===t}function a(t,n){if("rect"!==n){if(""!==n&&n||(n="hanning"),r[n]||(r[n]={}),!r[n][t.length])try{r[n][t.length]=e[n](t.length)}catch(t){throw new Error("Invalid windowing function")}t=function(t,e){for(var r=[],n=0;n<Math.min(t.length,e.length);n++)r[n]=t[n]*e[n];return r}(t,r[n][t.length])}return t}function o(t,e,r){for(var n=new Float32Array(t),a=0;a<n.length;a++)n[a]=a*e/r,n[a]=13*Math.atan(n[a]/1315.8)+3.5*Math.atan(Math.pow(n[a]/7518,2));return n}function i(t){return Float32Array.from(t)}function s(t){return 1125*Math.log(1+t/700)}function u(t,e,r){for(var n,a=new Float32Array(t+2),o=new Float32Array(t+2),i=e/2,u=s(0),f=(s(i)-u)/(t+1),h=new Array(t+2),c=0;c<a.length;c++)a[c]=c*f,o[c]=(n=a[c],700*(Math.exp(n/1125)-1)),h[c]=Math.floor((r+1)*o[c]/e);for(var l=new Array(t),m=0;m<l.length;m++){for(l[m]=new Array(r/2+1).fill(0),c=h[m];c<h[m+1];c++)l[m][c]=(c-h[m])/(h[m+1]-h[m]);for(c=h[m+1];c<h[m+2];c++)l[m][c]=(h[m+2]-c)/(h[m+2]-h[m+1])}return l}function f(e,r,n,a,o,i,s){void 0===a&&(a=5),void 0===o&&(o=2),void 0===i&&(i=!0),void 0===s&&(s=440);var u=Math.floor(n/2)+1,f=new Array(n).fill(0).map((function(t,a){return e*function(t,e){return Math.log2(16*t/e)}(r*a/n,s)}));f[0]=f[1]-1.5*e;var h,c,l,m=f.slice(1).map((function(t,e){return Math.max(t-f[e])}),1).concat([1]),p=Math.round(e/2),v=new Array(e).fill(0).map((function(t,r){return f.map((function(t){return(10*e+p+t-r)%e-p}))})),_=v.map((function(t,e){return t.map((function(t,r){return Math.exp(-.5*Math.pow(2*v[e][r]/m[r],2))}))}));if(c=(h=_)[0].map((function(){return 0})),l=h.reduce((function(t,e){return e.forEach((function(e,r){t[r]+=Math.pow(e,2)})),t}),c).map(Math.sqrt),_=h.map((function(t,e){return t.map((function(t,e){return t/(l[e]||1)}))})),o){var g=f.map((function(t){return Math.exp(-.5*Math.pow((t/e-a)/o,2))}));_=_.map((function(t){return t.map((function(t,e){return t*g[e]}))}))}return i&&(_=t(t([],_.slice(3),!0),_.slice(0,3),!0)),_.map((function(t){return t.slice(0,u)}))}function h(t,e){for(var r=0,n=0,a=0;a<e.length;a++)r+=Math.pow(a,t)*Math.abs(e[a]),n+=e[a];return r/n}function c(t){var e=t.ampSpectrum,r=t.barkScale,n=t.numberOfBarkBands,a=void 0===n?24:n;if("object"!=typeof e||"object"!=typeof r)throw new TypeError;var o=a,i=new Float32Array(o),s=0,u=e,f=new Int32Array(o+1);f[0]=0;for(var h=r[u.length-1]/o,c=1,l=0;l<u.length;l++)for(;r[l]>h;)f[c++]=l,h=c*r[u.length-1]/o;for(f[o]=u.length-1,l=0;l<o;l++){for(var m=0,p=f[l];p<f[l+1];p++)m+=u[p];i[l]=Math.pow(m,.23)}for(l=0;l<i.length;l++)s+=i[l];return{specific:i,total:s}}function l(t){var e=t.ampSpectrum;if("object"!=typeof e)throw new TypeError;for(var r=new Float32Array(e.length),n=0;n<r.length;n++)r[n]=Math.pow(e[n],2);return r}function m(t){var e=t.ampSpectrum,r=t.melFilterBank,n=t.bufferSize;if("object"!=typeof e)throw new TypeError("Valid ampSpectrum is required to generate melBands");if("object"!=typeof r)throw new TypeError("Valid melFilterBank is required to generate melBands");for(var a=l({ampSpectrum:e}),o=r.length,i=Array(o),s=new Float32Array(o),u=0;u<s.length;u++){i[u]=new Float32Array(n/2),s[u]=0;for(var f=0;f<n/2;f++)i[u][f]=r[u][f]*a[f],s[u]+=i[u][f];s[u]=Math.log(s[u]+1)}return Array.prototype.slice.call(s)}var p={exports:{}},v=null,_=function(t,e){var r=t.length;return e=e||2,v&&v[r]||function(t){(v=v||{})[t]=new Array(t*t);for(var e=Math.PI/t,r=0;r<t;r++)for(var n=0;n<t;n++)v[t][n+r*t]=Math.cos(e*(n+.5)*r)}(r),t.map((function(){return 0})).map((function(n,a){return e*t.reduce((function(t,e,n,o){return t+e*v[r][n+a*r]}),0)}))};!function(t){t.exports=_}(p);var g=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(p.exports),w=Object.freeze({__proto__:null,buffer:function(t){return t.signal},rms:function(t){var e=t.signal;if("object"!=typeof e)throw new TypeError;for(var r=0,n=0;n<e.length;n++)r+=Math.pow(e[n],2);return r/=e.length,Math.sqrt(r)},energy:function(t){var e=t.signal;if("object"!=typeof e)throw new TypeError;for(var r=0,n=0;n<e.length;n++)r+=Math.pow(Math.abs(e[n]),2);return r},complexSpectrum:function(t){return t.complexSpectrum},spectralSlope:function(t){var e=t.ampSpectrum,r=t.sampleRate,n=t.bufferSize;if("object"!=typeof e)throw new TypeError;for(var a=0,o=0,i=new Float32Array(e.length),s=0,u=0,f=0;f<e.length;f++){a+=e[f];var h=f*r/n;i[f]=h,s+=h*h,o+=h,u+=h*e[f]}return(e.length*u-o*a)/(a*(s-Math.pow(o,2)))},spectralCentroid:function(t){var e=t.ampSpectrum;if("object"!=typeof e)throw new TypeError;return h(1,e)},spectralRolloff:function(t){var e=t.ampSpectrum,r=t.sampleRate;if("object"!=typeof e)throw new TypeError;for(var n=e,a=r/(2*(n.length-1)),o=0,i=0;i<n.length;i++)o+=n[i];for(var s=.99*o,u=n.length-1;o>s&&u>=0;)o-=n[u],--u;return(u+1)*a},spectralFlatness:function(t){var e=t.ampSpectrum;if("object"!=typeof e)throw new TypeError;for(var r=0,n=0,a=0;a<e.length;a++)r+=Math.log(e[a]),n+=e[a];return Math.exp(r/e.length)*e.length/n},spectralSpread:function(t){var e=t.ampSpectrum;if("object"!=typeof e)throw new TypeError;return Math.sqrt(h(2,e)-Math.pow(h(1,e),2))},spectralSkewness:function(t){var e=t.ampSpectrum;if("object"!=typeof e)throw new TypeError;var r=h(1,e),n=h(2,e),a=h(3,e);return(2*Math.pow(r,3)-3*r*n+a)/Math.pow(Math.sqrt(n-Math.pow(r,2)),3)},spectralKurtosis:function(t){var e=t.ampSpectrum;if("object"!=typeof e)throw new TypeError;var r=e,n=h(1,r),a=h(2,r),o=h(3,r),i=h(4,r);return(-3*Math.pow(n,4)+6*n*a-4*n*o+i)/Math.pow(Math.sqrt(a-Math.pow(n,2)),4)},amplitudeSpectrum:function(t){return t.ampSpectrum},zcr:function(t){var e=t.signal;if("object"!=typeof e)throw new TypeError;for(var r=0,n=1;n<e.length;n++)(e[n-1]>=0&&e[n]<0||e[n-1]<0&&e[n]>=0)&&r++;return r},loudness:c,perceptualSpread:function(t){for(var e=c({ampSpectrum:t.ampSpectrum,barkScale:t.barkScale}),r=0,n=0;n<e.specific.length;n++)e.specific[n]>r&&(r=e.specific[n]);return Math.pow((e.total-r)/e.total,2)},perceptualSharpness:function(t){for(var e=c({ampSpectrum:t.ampSpectrum,barkScale:t.barkScale}),r=e.specific,n=0,a=0;a<r.length;a++)n+=a<15?(a+1)*r[a+1]:.066*Math.exp(.171*(a+1));return n*(.11/e.total)},powerSpectrum:l,mfcc:function(t){var e=t.ampSpectrum,r=t.melFilterBank,n=t.numberOfMFCCCoefficients,a=t.bufferSize,o=Math.min(40,Math.max(1,n||13));if(r.length<o)throw new Error("Insufficient filter bank for requested number of coefficients");var i=m({ampSpectrum:e,melFilterBank:r,bufferSize:a});return g(i).slice(0,o)},chroma:function(t){var e=t.ampSpectrum,r=t.chromaFilterBank;if("object"!=typeof e)throw new TypeError("Valid ampSpectrum is required to generate chroma");if("object"!=typeof r)throw new TypeError("Valid chromaFilterBank is required to generate chroma");var n=r.map((function(t,r){return e.reduce((function(e,r,n){return e+r*t[n]}),0)})),a=Math.max.apply(Math,n);return a?n.map((function(t){return t/a})):n},spectralFlux:function(t){var e=t.signal,r=t.previousSignal,n=t.bufferSize;if("object"!=typeof e||"object"!=typeof r)throw new TypeError;for(var a=0,o=-n/2;o<e.length/2-1;o++)x=Math.abs(e[o])-Math.abs(r[o]),a+=(x+Math.abs(x))/2;return a},spectralCrest:function(t){var e=t.ampSpectrum;if("object"!=typeof e)throw new TypeError;var r=0,n=-1/0;return e.forEach((function(t){r+=Math.pow(t,2),n=t>n?t:n})),r/=e.length,r=Math.sqrt(r),n/r},melBands:m});function d(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var y={},b={},S=function(t){if(void 0===y[t]){for(var e=(t-1).toString(2).length,r="0".repeat(e),n={},a=0;a<t;a++){var o=a.toString(2);o=r.substr(o.length)+o,o=[].concat(d(o)).reverse().join(""),n[a]=parseInt(o,2)}y[t]=n}return y[t]},M=function(t,e){return{real:t.real*e.real-t.imag*e.imag,imag:t.real*e.imag+t.imag*e.real}},T=function(t,e){return{real:t.real+e.real,imag:t.imag+e.imag}},E=function(t,e){return{real:t.real-e.real,imag:t.imag-e.imag}},A=function(t,e){var r=-2*Math.PI*t/e;return{real:Math.cos(r),imag:Math.sin(r)}},F=function(t){var e={};e.real=void 0===t.real?t.slice():t.real.slice();var r=e.real.length;return void 0===b[r]&&(b[r]=Array.apply(null,Array(r)).map(Number.prototype.valueOf,0)),e.imag=b[r].slice(),e},C=function(t){var e={};void 0===t.real||void 0===t.imag?e=F(t):(e.real=t.real.slice(),e.imag=t.imag.slice());var r=e.real.length,n=Math.log2(r);if(Math.round(n)!=n)throw new Error("Input size must be a power of 2.");if(e.real.length!=e.imag.length)throw new Error("Real and imaginary components must have the same length.");for(var a=S(r),o={real:[],imag:[]},i=0;i<r;i++)o.real[a[i]]=e.real[i],o.imag[a[i]]=e.imag[i];for(var s=0;s<r;s++)e.real[s]=o.real[s],e.imag[s]=o.imag[s];for(var u=1;u<=n;u++)for(var f=Math.pow(2,u),h=0;h<f/2;h++)for(var c=A(h,f),l=0;l<r/f;l++){var m=f*l+h,p=f*l+h+f/2,v={real:e.real[m],imag:e.imag[m]},_={real:e.real[p],imag:e.imag[p]},g=M(c,_),w=E(v,g);e.real[p]=w.real,e.imag[p]=w.imag;var d=T(g,v);e.real[m]=d.real,e.imag[m]=d.imag}return e},z=function(){function t(t,e){var r=this;if(this._m=e,!t.audioContext)throw this._m.errors.noAC;if(t.bufferSize&&!n(t.bufferSize))throw this._m._errors.notPow2;if(!t.source)throw this._m._errors.noSource;this._m.audioContext=t.audioContext,this._m.bufferSize=t.bufferSize||this._m.bufferSize||256,this._m.hopSize=t.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=t.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=t.callback,this._m.windowingFunction=t.windowingFunction||"hanning",this._m.featureExtractors=w,this._m.EXTRACTION_STARTED=t.startImmediately||!1,this._m.channel="number"==typeof t.channel?t.channel:0,this._m.inputs=t.inputs||1,this._m.outputs=t.outputs||1,this._m.numberOfMFCCCoefficients=t.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.numberOfBarkBands=t.numberOfBarkBands||this._m.numberOfBarkBands||24,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=t.featureExtractors||[],this._m.barkScale=o(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=u(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(t.source),this._m.spn.onaudioprocess=function(t){var e;null!==r._m.inputData&&(r._m.previousInputData=r._m.inputData),r._m.inputData=t.inputBuffer.getChannelData(r._m.channel),r._m.previousInputData?((e=new Float32Array(r._m.previousInputData.length+r._m.inputData.length-r._m.hopSize)).set(r._m.previousInputData.slice(r._m.hopSize)),e.set(r._m.inputData,r._m.previousInputData.length-r._m.hopSize)):e=r._m.inputData,function(t,e,r){if(t.length<e)throw new Error("Buffer is too short for frame length");if(r<1)throw new Error("Hop length cannot be less that 1");if(e<1)throw new Error("Frame length cannot be less that 1");var n=1+Math.floor((t.length-e)/r);return new Array(n).fill(0).map((function(n,a){return t.slice(a*r,a*r+e)}))}(e,r._m.bufferSize,r._m.hopSize).forEach((function(t){r._m.frame=t;var e=r._m.extract(r._m._featuresToExtract,r._m.frame,r._m.previousFrame);"function"==typeof r._m.callback&&r._m.EXTRACTION_STARTED&&r._m.callback(e),r._m.previousFrame=r._m.frame}))}}return t.prototype.start=function(t){this._m._featuresToExtract=t||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0},t.prototype.stop=function(){this._m.EXTRACTION_STARTED=!1},t.prototype.setSource=function(t){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=t,this._m.source.connect(this._m.spn)},t.prototype.setChannel=function(t){t<=this._m.inputs?this._m.channel=t:console.error("Channel ".concat(t," does not exist. Make sure you've provided a value for 'inputs' that is greater than ").concat(t," when instantiating the MeydaAnalyzer"))},t.prototype.get=function(t){return this._m.inputData?this._m.extract(t||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null},t}(),O={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:"hanning",featureExtractors:w,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,numberOfBarkBands:24,_featuresToExtract:[],windowing:a,_errors:{notPow2:new Error("Meyda: Buffer size must be a power of 2, e.g. 64 or 512"),featureUndef:new Error("Meyda: No features defined."),invalidFeatureFmt:new Error("Meyda: Invalid feature format"),invalidInput:new Error("Meyda: Invalid input."),noAC:new Error("Meyda: No AudioContext specified."),noSource:new Error("Meyda: No source node specified.")},createMeydaAnalyzer:function(t){return new z(t,Object.assign({},O))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(t,e,r){var a=this;if(!e)throw this._errors.invalidInput;if("object"!=typeof e)throw this._errors.invalidInput;if(!t)throw this._errors.featureUndef;if(!n(e.length))throw this._errors.notPow2;void 0!==this.barkScale&&this.barkScale.length==this.bufferSize||(this.barkScale=o(this.bufferSize,this.sampleRate,this.bufferSize)),void 0!==this.melFilterBank&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=u(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),void 0!==this.chromaFilterBank&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=f(this.chromaBands,this.sampleRate,this.bufferSize)),"buffer"in e&&void 0===e.buffer?this.signal=i(e):this.signal=e;var s=R(e,this.windowingFunction,this.bufferSize);if(this.signal=s.windowedSignal,this.complexSpectrum=s.complexSpectrum,this.ampSpectrum=s.ampSpectrum,r){var h=R(r,this.windowingFunction,this.bufferSize);this.previousSignal=h.windowedSignal,this.previousComplexSpectrum=h.complexSpectrum,this.previousAmpSpectrum=h.ampSpectrum}var c=function(t){return a.featureExtractors[t]({ampSpectrum:a.ampSpectrum,chromaFilterBank:a.chromaFilterBank,complexSpectrum:a.complexSpectrum,signal:a.signal,bufferSize:a.bufferSize,sampleRate:a.sampleRate,barkScale:a.barkScale,melFilterBank:a.melFilterBank,previousSignal:a.previousSignal,previousAmpSpectrum:a.previousAmpSpectrum,previousComplexSpectrum:a.previousComplexSpectrum,numberOfMFCCCoefficients:a.numberOfMFCCCoefficients,numberOfBarkBands:a.numberOfBarkBands})};if("object"==typeof t)return t.reduce((function(t,e){var r;return Object.assign({},t,((r={})[e]=c(e),r))}),{});if("string"==typeof t)return c(t);throw this._errors.invalidFeatureFmt}},R=function(t,e,r){var n={};void 0===t.buffer?n.signal=i(t):n.signal=t,n.windowedSignal=a(n.signal,e),n.complexSpectrum=C(n.windowedSignal),n.ampSpectrum=new Float32Array(r/2);for(var o=0;o<r/2;o++)n.ampSpectrum[o]=Math.sqrt(Math.pow(n.complexSpectrum.real[o],2)+Math.pow(n.complexSpectrum.imag[o],2));return n};return"undefined"!=typeof window&&(window.Meyda=O),O}()},815:(t,e,r)=>{const n=r(427),a=r(790);function o(t,e){return n.getSemitonesFromNote(t.name,t.octave,e.name,e.octave)}t.exports=class{constructor(t,e){this.note1=t,this.note2=e,this.semitones=function(t){let e=t%a.length;return 0===e&&(e=0),e}(o(t,e)),this.octaves=function(t){let e;return t<0?(e=-1*Math.floor(-1*t/a.length),0===e&&(e=0)):e=Math.floor(t/a.length),e}(o(t,e));let r=`${this.semitones} semitone${1===this.semitones?"":"s"}`,n=`${this.octaves} octave${1===this.octaves?"":"s"}`;0===o(t,e)?this.summary=`There is no difference between the notes, they are both ${t.name+t.octave}`:this.summary=`The note ${this.note1.name+this.note1.octave} is ${0===this.octaves?"":n}${0===this.semitones||0===this.octaves?"":" and "}${0===this.semitones?"":r} away from ${e.name+e.octave}`}}},517:t=>{let e=[{code:"ERR_SYNTAX_NOTE",err:"That note does not exist"},{code:"ERR_SYNTAX_TOO_MANY_CHARS",err:"Too many characters"},{code:"ERR_SYNTAX_PITCHED",err:"Invalid pitch modifier"},{code:"ERR_SYNTAX_OCTAVE",err:"The octave was not set properly"},{code:"ERR_SYNTAX_TOO_FEW_CHARS",err:"Too few characters"},{code:"ERR_NOTE_TOO_HIGH",err:"The note is too high"},{code:"ERR_NOTE_TOO_LOW",err:"The note is too low"},{code:"ERR_FREQUENCY_OUT_OF_RANGE",err:"The frequency is either too low or too high"}];t.exports=class{constructor(t,r,n){this.id=t,this.extra=r,this.input=n,this.code=e[t].code,this.err=e[t].err}}},943:(t,e,r)=>{const n=r(427),a=r(815),o=r(517);t.exports=class{constructor(t,e,r,a){if(this.name=t,this.octave=e,this.note,this.tuning={name:a.name,octave:a.octave,frequency:a.frequency},null===r)this.frequency=n.fromNote(this,this.tuning),this.centsOff=0;else{this.frequency=r;let i=t||null,s=e||null,u=n.getCentsOffFromNote(i,s,r,a);!1!==u?(this.centsOff=u.cents,this.name=u.note.name,this.octave=u.note.octave):this.err=new o(7,`The frequency "${r}" is out of range`,r)}null!==this.name&&null!==this.octave&&(this.note=this.name+this.octave)}transpose(t){n.transpose(this,t)}compare(t){return new a(this,t)}}},614:(t,e,r)=>{const n=r(431),a=r(943);let o={name:"A",octave:4,frequency:440};t.exports={setRoot:(t,e)=>function(t,e){let r=n.parseString(t);return!(void 0!==r.err||isNaN(e)||e<=0||(o.name=r.name,o.octave=r.octave,o.frequency=e,0))}(t,e),noteFromName:t=>function(t){let e=n.parseString(t);return new a(e.name,e.octave,null,o)}(t),noteFromFreq:t=>new a(null,null,t,o)}},427:(t,e,r)=>{const n=r(790);function a(t,e){return Math.log(e/t)/Math.log(2)*1200}function o(t,e,r,a){return n.indexOf(t)-n.indexOf(r)+(e-a)*n.length}function i(){return s(2*n.length)}function s(t){return Math.pow(2,1/t)}function u(t,e,r){return r.frequency*Math.pow(s(n.length),function(t,e,r){return o(t,e,r.name,r.octave)}(t,e,r))}t.exports.fromNote=function(t){return u(t.name,t.octave,t.tuning)},t.exports.transpose=function(t,e,r){let a=n.indexOf(t.name)+r,o=t.octave;for(;a<0;)a+=n.length,o--;for(;a>n.length-1;)a-=n.length,o++;if(o<0)return new Error(7,`This result in octave being "${e}"`,string);t.octave=o,t.name=n[a]},t.exports.getSemitonesFromNote=o,t.exports.getCentsOffFromNote=function(t,e,r,o){let s=t,f=e;if(null===s||null===f){for(let t=-3;t<40;t++){let e=u(n[0],t,o)/i(),h=u(n[n.length-1],t,o)*i();if(r>=e&&r<=h){f=t;for(let t=0;t<n.length;t++){let e=a(u(n[t],f,o),r);if(e<=50&&e>-50){s=n[t];break}}}}if(null===f)return!1;if(null===s)return!1}return{note:{name:s,octave:f},cents:a(u(s,f,o),r)}}},431:(t,e,r)=>{const n=r(790),a=r(337),o=r(517);t.exports.parseString=function(t){let e=t.split(""),r=null,i=null,s=null,u=null;if(e.length<2)return new o(4,"",t);if(e.length>3)return new o(1,`The characters "${t.substring(3).split("").join(",")}" is exceeding the max number of characters allowed`,t);if(3===e.length){if(!a.sharp.includes(e[1])&&!a.flat.includes(e[1]))return new o(2,`The character "${e[2]}" is invalid`,t);s=e[1],r=Array.from(e[0]+e[2])}else r=e,s=null;if(!n.join("").toLowerCase().split("").includes(e[0].toLowerCase()))return new o(0,`The characer "${e[0]}" is invalid`,t);if(i=e[0].toUpperCase(),isNaN(r[1]))return new o(3,`The character "${r[1]}" is not a number`,t);if(u=Number(r[1]),null!==s){let e=null;if(e=a.sharp.includes(s)?n.indexOf(i)+1:n.indexOf(i)-1,e<0&&(e=n.length-1,u--),e>n.length-1&&(e=0,u++),u<0)return new o(7,`This result in octave being "${u}"`,t);i=n[e]}return{name:i,octave:u}}},790:t=>{"use strict";t.exports=JSON.parse('["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]')},337:t=>{"use strict";t.exports=JSON.parse('{"sharp":["#"],"flat":["b","â™­"]}')}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}var n={};return(()=>{"use strict";r(645),r(752),r(614)})(),n.default})()));